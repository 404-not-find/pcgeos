<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>

<!-- $Id: GenView_11.htm,v 1.1 97/06/02 16:29:59 lawrence Exp $ -->
<META NAME="copyright" CONTENT="Copyright 1997 GEOWORKS">
<!-- <META NAME="description" CONTENT=""> -->
<!-- <META NAME="keywords" CONTENT=""> -->
<LINK REL="STYLESHEET" HREF="../../docHelpers/style.css">
<LINK REV="MADE" HREF="mailto:doc-feedback@geoworks.com">

<TITLE> Drawing the Document</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">


<H1 CLASS="subsectionTitle">
<A HREF="index.htm">GenView</A>: 4.3 <A HREF="GenView_e.htm">Advanced Concepts and Uses</A>: 
<A NAME="94673">
 </A>
Drawing the Document</H1>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="GenView_e.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="GenView_10.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">4.2 Documents in a View</A> 
<!-- to next --> | <A HREF="GenView_12.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">4.4 Document and View Size</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
<PRE>MSG_GEN_VIEW_GET_WINDOW, MSG_GEN_VIEW_REDRAW_CONTENT</PRE>
<P>
Displaying your document inside a view is as easy as drawing the document. Any time part of the view becomes invalid (due to scrolling or window movement, for example), the content will receive a MSG_META_EXPOSED. Your content object must have a handler for <CODE>
MSG_META_EXPOSED</CODE>
. See <A HREF="GenView_8.htm#98813"> MSG_META_EXPOSED Handler</A>
 for an example of handling <CODE>
MSG_META_EXPOSED</CODE>
.</P>
<P>
You may also cause your application to redraw the window at any time. However, you will need to either save the window handle when the view is created (see <CODE>
MSG_META_CONTENT_VIEW_WIN_OPENED</CODE>
) or retrieve it with <CODE>
MSG_GEN_VIEW_GET_WINDOW</CODE>
. When your content has the window handle, it can create a GState for that window and draw to it as if a <CODE>
MSG_META_EXPOSED</CODE>
 had been sent; drawing the changed portion of the document will change the drawing on the screen. Note that the content should not send itself a <CODE>
MSG_META_EXPOSED</CODE>
--this message should be generated only by the window system because the window system will then know which parts of the screen have become invalid. For a self-generated <CODE>
MSG_META_EXPOSED</CODE>
 to work, you must also get the view's visible rectangle (with <CODE>
MSG_GEN_VIEW_GET_VISIBLE_RECT</CODE>
, above) and call <CODE>
GrInvalRect()</CODE>
 to invalidate the view's window.</P>
<P>
A simpler way to force a redraw is to make the GenView redraw its entire document with <CODE>
MSG_GEN_VIEW_REDRAW_CONTENT</CODE>
. One example of when this might be used is a &quot;Refresh&quot; or &quot;Redraw&quot; option; this causes the window to be redrawn in order to clean up anything extra that may be left on the screen. Note that this is an option provided by the GenViewControl object.</P>

<H4 CLASS="RefETitle">
<A NAME="IX_MSG_GEN_VIEW_GET_WINDOW">
 </A>
MSG_GEN_VIEW_GET_WINDOW</H4>
<PRE CLASS="syntax">WindowHandle MSG_GEN_VIEW_GET_WINDOW();</PRE>
<P>
This message returns the window handle of the view window. As an alternative, you can store the view's window handle when <CODE>
MSG_META_CONTENT_VIEW_WIN_OPENED</CODE>
 is sent upon view startup (see <A HREF="GenView_f.htm#47756"> The Life of a View</A>
) and discard it when you receive <CODE>
MSG_META_CONTENT_VIEW_CLOSING</CODE>
.</P>
<P CLASS="refField">
Source:	Unrestricted.</P>
<P CLASS="refField">
Destination:	Any GenView object.</P>
<P CLASS="refField">
Parameters:	None.</P>
<P CLASS="refField">
Return:	The window handle of the GenView's window.</P>
<P CLASS="refField">
Interception:	Generally not intercepted.</P>
<P CLASS="refField">
See Also:	<CODE>
MSG_META_CONTENT_VIEW_WIN_OPENED</CODE>
, <CODE>
MSG_META_CONTENT_VIEW_CLOSING</CODE>
</P>


<H4 CLASS="RefETitle">
<A NAME="IX_MSG_GEN_VIEW_REDRAW_CONTENT">
 </A>
MSG_GEN_VIEW_REDRAW_CONTENT</H4>
<PRE CLASS="syntax">void	MSG_GEN_VIEW_REDRAW_CONTENT();</PRE>
<P>
This message causes the GenView to redraw its entire content. This is essentially the same as exposing the entire view window.</P>
<P CLASS="refField">
Source:	Unrestricted--typically the GenViewControl</P>
<P CLASS="refField">
Destination:	Any GenView object.</P>
<P CLASS="refField">
Interception:	Generally not intercepted.</P>

<HR>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="GenView_e.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="GenView_10.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">4.2 Documents in a View</A> 
<!-- to next --> | <A HREF="GenView_12.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">4.4 Document and View Size</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
</BODY>
</HTML>
