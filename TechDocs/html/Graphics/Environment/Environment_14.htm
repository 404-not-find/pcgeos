<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>

<!-- $Id: Environment_14.htm,v 1.1 97/06/02 15:07:36 lawrence Exp $ -->
<META NAME="copyright" CONTENT="Copyright 1997 GEOWORKS">
<!-- <META NAME="description" CONTENT=""> -->
<!-- <META NAME="keywords" CONTENT=""> -->
<LINK REL="STYLESHEET" HREF="../../docHelpers/style.css">
<LINK REV="MADE" HREF="mailto:doc-feedback@geoworks.com">

<TITLE> Special Drawing Commands</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">


<H1 CLASS="subsectionTitle">
<A HREF="index.htm">Graphics Environment</A>: 8.2 <A HREF="Environment_12.htm">Graphics Strings</A>: 
Special Drawing Commands</H1>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="Environment_12.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="Environment_13.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">8.1 Storage and Loading</A> 
<!-- to next --> | <A HREF="Environment_15.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">8.3 Declaring a GString Statically</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
<PRE>GrEndGString(), GrNewPage(), GrLabel(), GrComment(), GrNullOp(), GrEscape(), GrSetGStringBounds()</PRE>
<P>
There are certain kernel graphics commands which, though they could be used when drawing to any graphics space, are normally only used when describing GStrings. Most of these commands have no visible effect, but only serve to provide the GString with certain control codes.</P>
<P>
The most commonly used of these routines is <A NAME="IX_GrEndGString()">
 </A>
<CODE>
GrEndGString()</CODE>
. This signals that you are done describing the GString, writing a GR_END_GSTRING to the GString. This routine will let you know if there was an error while creating the GString (if the storage device ran out of space). Its macro equivalent is <CODE>
GSEndString()</CODE>
.</P>
<P>
The <A NAME="IX_GrNewPage()">
 </A>
<CODE>
GrNewPage()</CODE>
 routine signals that the GString is about to start describing another page. GStrings are used to describe things to be sent to the printer, and unsurprisingly, this routine is often used in that context. An example of a prototype multi-page printing loop is shown in<A HREF="Environment_14.htm#22134"> Multi-Page Printing Loop</A>
. Whether or not it is drawing to a GString, <CODE>
GrNewPage()</CODE>
 causes the GState to revert to the default. When calling this routine, specify whether or not a form-feed signal should be generated by means of the <CODE>
PageEndCommand</CODE>
<A NAME="IX_PEC_&ldots;">
 </A>
<A NAME="IX_PageEndCommand">
 </A>
 argument.</P>
<P CLASS="figTitle">
Code Display 23-1 <A NAME="22134">
 </A>
Multi-Page Printing Loop</P>
<PRE>/* The application this code fragment is taken from stores several pages of 
 * graphics in one coordinate space. The pages are arranged each below the other.
 * To display page #<EM>X</EM>, we would scroll down <EM>X</EM> page lengths. */</PRE>
<PRE>for (curPage=0; curPage &lt; numberOfPages; curPage++) {
	GrSaveState(gstate);
	GrApplyTranslation(gstate, 0,MakeWWFixed(curPage*pageHeight));</PRE>
<PRE>	/* ...Draw current page... */</PRE>
<PRE>	GrRestoreState(gstate);
	GrNewPage(gstate, PEC_NO_FORM_FEED );}</PRE>
<P>
The<CODE>
 GrLabel()</CODE>
<A NAME="IX_GrLabel()">
 </A>
 routine inserts a special element into the GString. This element does not draw anything. However, these GString labels, as they are called, are often used like labels in code. By using GString drawing routines with a certain option (described below), you may &quot;jump&quot; to this label and start drawing from that point in the GString. Alternately, you could start at some other part of the GString and automatically draw until you encountered that label.</P>
<P>
The <A NAME="IX_GrComment()">
 </A>
<CODE>
GrComment()</CODE>
 routine inserts an arbitrary-length string of bytes into the GString which the GString interpreter will ignore when drawing the GString. You might use this to store anything from custom drawing commands which only your geode has to be able to understand to a series of blank bytes which could act as a sort of placeholder in memory.</P>
<P CLASS="figTitle">
Code Display 23-2 GSComment Example</P>
<PRE>static const byte MyGString[] = {
	GSComment(20), 'C','o','p','y','l','e','f','t',' ','1','9','9','3',
	' ','P','K','i','t','t','y', 
	GSDrawEllipse(72, 72, 144, 108), 
	GSEndString()};</PRE>
<P>
The <A NAME="IX_GrNullOp()">
 </A>
<CODE>
GrNullOp()</CODE>
 routine draws nothing and does nothing other than take up space in the GString (a single-byte element of value GR_NOP). You might use it as a placeholder in the GString.</P>
<P>
The <A NAME="IX_GrEscape()">
 </A>
<CODE>
GrEscape()</CODE>
 writes an escape code with accompanying data to the GString. Most geodes do not use this functionality; you might use it to embed special information in a <CODE>
TransferItemFormat</CODE>
 based on GStrings.</P>
<P>
Depending on what the system will do with your GString, the bounds of the GString may be used for many purposes. Normally the system determines the bounds of a GString by traversing the whole GString and finding out how much space it needs to draw. The <A NAME="IX_GrSetGStringBounds()">
 </A>
<CODE>
GrSetGStringBounds()</CODE>
 allows you to optimize this, setting up a special GString element whose data contains the bounds of the GString. You should call this routine early on in your GString definition so that the system won't have to traverse very much of your GString to discover the special element.</P>
<HR>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="Environment_12.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="Environment_13.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">8.1 Storage and Loading</A> 
<!-- to next --> | <A HREF="Environment_15.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">8.3 Declaring a GString Statically</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
</BODY>
</HTML>
