<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>

<!-- $Id: VM_e.htm,v 1.1 97/06/02 15:55:10 lawrence Exp $ -->
<META NAME="copyright" CONTENT="Copyright 1997 GEOWORKS">
<!-- <META NAME="description" CONTENT=""> -->
<!-- <META NAME="keywords" CONTENT=""> -->
<LINK REL="STYLESHEET" HREF="../../docHelpers/style.css">
<LINK REV="MADE" HREF="mailto:doc-feedback@geoworks.com">

<TITLE> VM Block Information</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">


<H1 CLASS="subsectionTitle">
<A HREF="index.htm">Virtual Memory</A>: 3.7 <A HREF="VM_7.htm">Using Virtual Memory</A>: 
VM Block Information</H1>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="VM_7.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="VM_d.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">3.6 Accessing and Altering VM Blocks</A> 
<!-- to next --> | <A HREF="VM_f.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">3.8 Updating and Saving Files</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
<PRE>VMVMBlockToMemBlock(), VMMemBlockToVMBlock(), VMInfo()</PRE>
<P>
Several utilities are provided to give you information about VM blocks.</P>
<P>
<A NAME="IX_VMVMBlockToMemBlock()">
 </A>
If you know the handle of a VM block, you can find out the handle of the associated global block by calling the routine <CODE>
VMVMBlockToMemBlock()</CODE>
. This routine takes two arguments, namely the VM file handle and the VM block handle. It returns the global memory handle of the associated block; however, note the caveats regarding global handles in the above section. If the VM block is not currently associated with a global memory block, the routine will allocate a memory block, copy the VM block into it, and return its handle. If the VM handle is not associated with any data in the file and is not attached to a global memory block, <CODE>
VMVMBlockToMemBlock()</CODE>
 returns a null handle.</P>
<P>
<A NAME="IX_VMMemBlockToVMBlock()">
 </A>
Conversely, if you know the handle of a global memory block and want to find out the VM file and block to which it is attached, call the routine <CODE>
VMMemBlockToVMBlock()</CODE>
. This routine takes two arguments: the global memory handle, and a pointer to a <CODE>
VMFileHandle</CODE>
 variable. It returns the VM block handle of the associated VM block, and writes the handle of the VM file to the address passed. If the global memory block is not attached to a VM file, it returns null handles.</P>
<P>
<A NAME="IX_VMInfo()">
 </A>
The Boolean routine <CODE>
VMInfo()</CODE>
 is an omnibus information routine. It takes three arguments: the handle of a VM file, the handle of a VM block, and a pointer to a <CODE>
VMInfoStruct</CODE>
 structure (described below in <A HREF="VM_e.htm#93146"> VMInfoStruct</A>
). If the VM block is free, out of range, or otherwise invalid, it returns <EM>
false</EM>
; otherwise, it returns <EM>
true</EM>
 (i.e. non-zero) and fills in the fields of the <CODE>
VMInfoStruct</CODE>
.</P>
<P CLASS="figTitle">
Code Display 18-1 <A NAME="IX_VMInfoStruct">
 </A>
<A NAME="93146">
 </A>
VMInfoStruct</P>
<PRE>/* This is the definition of the VMInfoStruct. A pointer to a VMInfoStruct is
 * passed to the routine VMInfo(). The routine fills in the structure's fields.
 */
typedef struct {
	MemHandle		mh;	/* Null handle returned if no block is attached */
	word		size;	/* Size of VM block in bytes */
	word		userID;	/* User ID (or zero if no user ID was specified) */
} VMInfoStruct;</PRE>
<HR>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="VM_7.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="VM_d.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">3.6 Accessing and Altering VM Blocks</A> 
<!-- to next --> | <A HREF="VM_f.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">3.8 Updating and Saving Files</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
</BODY>
</HTML>
