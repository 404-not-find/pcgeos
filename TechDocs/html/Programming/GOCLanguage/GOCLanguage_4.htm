<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>

<!-- $Id: GOCLanguage_4.htm,v 1.1 97/06/02 16:00:43 lawrence Exp $ -->
<META NAME="copyright" CONTENT="Copyright 1997 GEOWORKS">
<!-- <META NAME="description" CONTENT=""> -->
<!-- <META NAME="keywords" CONTENT=""> -->
<LINK REL="STYLESHEET" HREF="../../docHelpers/style.css">
<LINK REV="MADE" HREF="mailto:doc-feedback@geoworks.com">

<TITLE> Fixed Point Structures</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">


<H1 CLASS="subsectionTitle">
<A HREF="index.htm">GEOS Programming</A>: 1.3 <A HREF="GOCLanguage_1.htm">Basic Data Types and Structures</A>: 
Fixed Point Structures</H1>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="GOCLanguage_1.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="GOCLanguage_3.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">1.2 Handles and Pointers</A> 
<!-- to next --> | <A HREF="GOCLanguage_5.htm"><IMG SRC="../../docImages/nextUp.gif" BORDER="0" ALT="Next: ">2 Goc and C</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
<P>
When you want to represent non-integral numbers (i.e., real numbers), you can use either the standard C floating-point format or the following special structures of GEOS for fixed point math. Note that fixed-point calculations are faster than the corresponding floating-point math, so if you want to optimize your code, you should use the GEOS fixed-point structures with the GEOS math routines.</P>
<P CLASS="figTitle">
Code Display 5-2 GEOS Data Structures</P>
<PRE><A NAME="IX_Fixed point numbers"> </A>/* Fixed-Point Structures
 *    The following structures are used to represent fixed-point numbers:
 *    numbers with a fractional portion and an integral portion. Notice that
 *    there are several formats of fixed-point numbers; each uses a different
 *    number of bits for the parts of the number. Choose whichever is most
 *    appropriate (for optimization). */</PRE>
<PRE><A NAME="IX_BBFixed"> </A>	/* BBFixed
	 * One byte integer, one byte fraction */
typedef struct {
    byte		BBF_frac;		/* fractional portion */
    byte		BBF_int;		/* integral portion */
} BBFixed;</PRE>
<PRE>	/* BBFixedAsWord
	 * Sometimes it is convenient to refer to a BBFixed value as type word.
	 * The BBFixedAsWord type is used for this purpose. */
<A NAME="IX_BBFixedAsWord"> </A>typedef word		BBFixedAsWord;</PRE>
<PRE>	/* WBFixed
	 * One word integer, one byte fraction */
<A NAME="IX_WBFixed"> </A>typedef struct {
    byte		WBF_frac;		/* fractional portion */
    word		WBF_int;		/* integral portion */
} WBFixed;</PRE>
<PRE>	/* WWFixed
	 * One word integer, one word fraction */
<A NAME="IX_WWFixed"> </A>typedef struct {
    word		WWF_frac;		/* fractional portion */
    word		WWF_int;		/* integral portion */
} WWFixed;</PRE>
<PRE>	/* WWFixedAsDWord
	 * Sometimes it is convenient to refer to a WWFixed value as type dword.
	 * The WWFixedAsDWord type is used for this purpose. */
<A NAME="IX_WWFixedAsDWord"> </A>typedef dword		WWFixedAsDWord;</PRE>
<PRE>	/* DWFixed
	 * two words (one dword) integer, one word fraction */
typedef struct {
    word		DWF_frac;		/* fractional portion */
    sdword		DWF_int;		/* integral portion */
<A NAME="IX_DWFixed"> </A>} DWFixed;</PRE>
<PRE>/* Three-byte structure
 * The WordAndAHalf structure is used when you need a 24-bit value and you want to
 * optimize and avoid using a 32-bit value. */</PRE>
<PRE>typedef struct {
    word		WAAH_low;		/* the low 16 bits */
    byte		WAAH_high;		/* the high 8 bits */
} WordAndAHalf;</PRE>
<P>
<A NAME="IX_WWFixed">
 </A>
Three special macros are also available to work with the <CODE>
WWFixed</CODE>
 type. These are listed below:</P>
<UL>
<LI>
<CODE>
MakeWWFixed<BR>
</CODE>
<A NAME="IX_MakeWWFixed() macro">
 </A>
This macro creates a <CODE>
WWFixed</CODE>
 structure from a given floating-point number or dword number.</LI>
<LI>
<CODE>
WWFixedToFrac<BR>
</CODE>
<A NAME="IX_WWFixedToFrac() macro">
 </A>
This macro produces the fractional portion of a <CODE>
WWFixed</CODE>
 structure.</LI>
<LI>
<CODE>
WWFixedToInt<BR>
</CODE>
<A NAME="IX_WWFixedToInt() macro">
 </A>
This macro produces the integral portion of a <CODE>
WWFixed</CODE>
 structure.</LI>
</UL>
<P>
Two other macros are provided for use with <CODE>
WWFixedAsDword</CODE>
 structures:</P>
<UL>
<LI>
<CODE>
IntegerOf()<BR>
</CODE>
This macro returns the integral portion of a <CODE>
WWFixedAsDword</CODE>
 structure.</LI>
<LI>
<CODE>
FractionOf()<BR>
</CODE>
This macro returns the fractional portion of a <CODE>
WWFixedAsDword</CODE>
 structure.</LI>
</UL>
<HR>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="GOCLanguage_1.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="GOCLanguage_3.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">1.2 Handles and Pointers</A> 
<!-- to next --> | <A HREF="GOCLanguage_5.htm"><IMG SRC="../../docImages/nextUp.gif" BORDER="0" ALT="Next: ">2 Goc and C</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
</BODY>
</HTML>
