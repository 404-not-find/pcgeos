<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>

<!-- $Id: Geodes_7.htm,v 1.1 97/06/02 15:29:35 lawrence Exp $ -->
<META NAME="copyright" CONTENT="Copyright 1997 GEOWORKS">
<!-- <META NAME="description" CONTENT=""> -->
<!-- <META NAME="keywords" CONTENT=""> -->
<LINK REL="STYLESHEET" HREF="../../docHelpers/style.css">
<LINK REV="MADE" HREF="mailto:doc-feedback@geoworks.com">

<TITLE> Writing Your Own Libraries</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">


<H1 CLASS="subsectionTitle">
<A HREF="index.htm">Applications and Geodes</A>: 1.6 <A HREF="Geodes_1.htm">Geodes</A>: 
Writing Your Own Libraries</H1>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="Geodes_1.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="Geodes_6.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">1.5 Using Other Geodes</A> 
<!-- to next --> | <A HREF="Geodes_8.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">1.7 Working with Geodes</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
<P>
<A NAME="IX_.gp files:for libraries[;gp files:for libraries]">
 </A>
<A NAME="IX_Libraries:writing libraries">
 </A>
Creating a library geode is a simple step beyond creating a normal application. Libraries can have their own process threads or not; most libraries do not, though some will. To create a library geode, you have to do four things:</P>
<UL>
<LI>
Declare the geode to be a library.<BR>
In the geode parameters (<STRONG CLASS="fileName">
.gp</STRONG>
) file, you must declare the type of the geode to be library.</LI>
<LI>
Define an entry point routine.<BR>
Create a routine that initializes the library; this routine is called the &quot;entry point routine&quot; and is called each time the library is loaded.</LI>
<LI>
Export the entry point routine.<BR>
Add another line in the geode parameters (<STRONG CLASS="fileName">
.gp</STRONG>
) file to export the library's entry point routine.</LI>
<LI>
Set the geode's permanent name properly.<BR>
Most libraries have the extension of their permanent name be &quot;lib.&quot; This helps identify it as a library when using Swat. The permanent name is defined in the geode parameters (<STRONG CLASS="fileName">
.gp</STRONG>
) file.</LI>
</UL>
<P>
<A HREF="Geodes_7.htm#94502"> Defining a Library-the sound.gp File</A>
 shows an example of the three changes you must make to the geode's parameters file to make it a library.</P>
<P CLASS="figTitle">
Code Display 7-1 <A NAME="94502">
 </A>
Defining a Library--the sound.gp File</P>
<PRE><A NAME="IX_sound library:parameters file"> </A># The Sound Library has the following three lines in its geode parameters file
# (sound.gp) different from how they might appear in an application.</PRE>
<PRE>#
# The permanent name of the geode might normally be sound.app if it is an
# application. A library typically has &quot;lib&quot; as its name extension.
#
name sound.lib</PRE>
<PRE>#
# Declare the type of the geode to be a library. Applications typically have a
# &quot;process&quot; aspect; many libraries do not. Libraries must also be declared to
# have a &quot;library&quot; aspect. (Note that the Sound Library is exceptional in that
# it has both a driver aspect and a library aspect.)
#
type driver, library, single</PRE>
<PRE>#
# Export the geode's entry point routine so the kernel may call it when the
# library is loaded. This routine must be defined somewhere in the geode's code.
# Note that it is exported with the &quot;entry&quot; line rather than the standard
# &quot;export&quot; line; this is to distinguish the exported routine as the entry
# point rather than a typical routine.
#
entry SoundEntry</PRE>
<HR>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="Geodes_1.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="Geodes_6.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">1.5 Using Other Geodes</A> 
<!-- to next --> | <A HREF="Geodes_8.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">1.7 Working with Geodes</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
</BODY>
</HTML>
