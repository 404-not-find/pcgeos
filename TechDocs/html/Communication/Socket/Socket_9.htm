<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>

<!-- $Id: Socket_9.htm,v 1.1 97/06/02 14:15:22 lawrence Exp $ -->
<META NAME="copyright" CONTENT="Copyright 1997 GEOWORKS">
<!-- <META NAME="description" CONTENT=""> -->
<!-- <META NAME="keywords" CONTENT=""> -->
<LINK REL="STYLESHEET" HREF="../../docHelpers/style.css">
<LINK REV="MADE" HREF="mailto:doc-feedback@geoworks.com">

<TITLE> Loading on Connection</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">


<H1 CLASS="sectionTitle">
<A HREF="index.htm">Socket</A>: 6 
<A NAME="61776">
 </A>
Loading on Connection</H1>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="index.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="Socket_8.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">5 Accepting a Connection</A> 
<!-- to next --> | <A HREF="Socket_a.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">7 Sending and Receiving Data</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
<PRE>SocketAddLoadOnMsg(), SocketAddLoadOnMsgInDomain(), SocketRemoveLoadOnMsg(), SocketRemoveLoadOnMsgInDomain()</PRE>
<P>
It's all very well that you can tell a running program to accept packets and connections over sockets. However, it seems unreasonable to ask the user to run these programs by hand any time there might be a pending connection.</P>
<P>
You can tell the Socket library to load a particular geode when it receives data on a particular port, or on a particular port via a particular domain. For an example, see the Appl/SDK_C/Talk sample application: if you run Talk and press the Autoload button, the Socket library knows to start up the Talk program because it senses that it is receiving an incoming Talk connection. </P>
<P>
When the program starts up, it should probably create a socket, bind it to the appropriate port, and make that socket listen. If the listening socket is then destroyed, then any unaccepted connections are canceled.</P>
<P>
The Socket library writes out an entry to the GEOS.INI file in the [socket] category and with key &quot;LoadOnMsg&quot;. The Socket library consults these GEOS.INI file entries when it starts up and will act accordingly when it receives packets.</P>
<P>
<A NAME="IX_SocketAddLoadOnMsg()">
 </A>
<A NAME="IX_SocketAddLoadOnMsgInDomain()">
 </A>
To make the Socket library load a program when receiving packets on a particular port, call <CODE>
SocketAddLoadOnMsg()</CODE>
. Specify the program by means of its path. To load a program when receiving packets on a particular port on a particular domain, call <CODE>
SocketAddLoadOnMsgInDomain()</CODE>
. </P>
<P>
<A NAME="IX_SocketRemoveLoadOnMsg()">
 </A>
<A NAME="IX_SocketRemoveLoadOnMsgInDomain()">
 </A>
To remove the entries from the GEOS.INI file and tell the Socket library not to try to load the program when receiving packets, call either <CODE>
SocketRemoveLoadOnMsg()</CODE>
 or <CODE>
SocketRemoveLoadOnMsgInDomain()</CODE>
.</P>
<P>
To listen for incoming data in this manner, the Socket library effectively binds a socket to monitor the port. Thus</P>
<UL>
<LI>
<CODE>
SocketAddLoadOnMsg()</CODE>
 and <CODE>
SocketAddLoadOnMsgInDomain()</CODE>
 can run into bind conflicts just as <CODE>
SocketBind()</CODE>
 and <CODE>
SocketBindInDomain()</CODE>
 do.</LI>
<LI>
<CODE>
SocketAddLoadOnMsg()</CODE>
 interferes with <CODE>
SocketAddLoadOnMsgInDomain()</CODE>
 and <CODE>
SocketBindInDomain()</CODE>
 on the same port. </LI>
<LI>
<CODE>
SocketAddLoadOnMsgInDomain()</CODE>
 interferes with <CODE>
SocketAddLoadOnMsg()</CODE>
 and <CODE>
SocketBind()</CODE>
 on the same port.</LI>
</UL>
<HR>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="index.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="Socket_8.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">5 Accepting a Connection</A> 
<!-- to next --> | <A HREF="Socket_a.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">7 Sending and Receiving Data</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
</BODY>
</HTML>
