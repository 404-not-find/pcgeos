<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>

<!-- $Id: Stream_6.htm,v 1.1 97/06/02 14:16:24 lawrence Exp $ -->
<META NAME="copyright" CONTENT="Copyright 1997 GEOWORKS">
<!-- <META NAME="description" CONTENT=""> -->
<!-- <META NAME="keywords" CONTENT=""> -->
<LINK REL="STYLESHEET" HREF="../../docHelpers/style.css">
<LINK REV="MADE" HREF="mailto:doc-feedback@geoworks.com">

<TITLE> Shutting Down a Stream</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">


<H1 CLASS="subsectionTitle">
<A HREF="index.htm">Using Streams</A>: 1.5 <A HREF="Stream_1.htm">Using Streams: The Basics</A>: 
<A NAME="15612">
 </A>
Shutting Down a Stream</H1>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="Stream_1.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="Stream_5.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">1.4 Reading Data from a Stream</A> 
<!-- to next --> | <A HREF="Stream_7.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">1.6 Miscellaneous Functions</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
<PRE>StreamClose()</PRE>
<P>
<A NAME="IX_StreamClose()">
 </A>
Either the writer or the reader can instigate stream shutdown by calling <CODE>
StreamClose()</CODE>
. When one of the two calls this routine, the shut-down process is started; it will not be completed until the other calls the routine.</P>
<P>
If the writer calls <CODE>
StreamClose()</CODE>
, it may specify that the data already in the buffer be <EM>
flushed</EM>
 (immediately cleared), or that it <EM>
linger</EM>
. If you specify that the data should linger, the data will be preserved as long as the reader has the stream open. The reader can continue to read data normally until it runs out of data. The last read-operation will most likely return STREAM_SHORT_READ_WRITE; after that, all attempts to read data will generate the error STREAM_CLOSING. At that point, the reader should call <CODE>
StreamClose()</CODE>
. (If the data was flushed by the writer, the next read attempt will return STREAM_CLOSING.)</P>
<P>
To shut down the stream, call the routine <CODE>
StreamClose()</CODE>
. This routine is passed the following arguments:</P>
<UL>
<LI>
The <CODE>
GeodeHandle</CODE>
 of the stream driver.</LI>
<LI>
<A NAME="IX_StreamToken:with StreamClose()">
 </A>
The <CODE>
StreamToken</CODE>
 of the stream.</LI>
<LI>
A Boolean value saying whether the data in the stream should be kept until it's read; <EM>
false</EM>
 (i.e. zero) indicates it should be flushed.</LI>
</UL>
<P>
If you are using the Serial or Parallel drivers (described later in this chapter), you do not have to coordinate the closure of a stream.</P>
<HR>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="Stream_1.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="Stream_5.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">1.4 Reading Data from a Stream</A> 
<!-- to next --> | <A HREF="Stream_7.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">1.6 Miscellaneous Functions</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
</BODY>
</HTML>
