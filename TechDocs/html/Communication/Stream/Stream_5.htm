<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>

<!-- $Id: Stream_5.htm,v 1.1 97/06/02 14:16:19 lawrence Exp $ -->
<META NAME="copyright" CONTENT="Copyright 1997 GEOWORKS">
<!-- <META NAME="description" CONTENT=""> -->
<!-- <META NAME="keywords" CONTENT=""> -->
<LINK REL="STYLESHEET" HREF="../../docHelpers/style.css">
<LINK REV="MADE" HREF="mailto:doc-feedback@geoworks.com">

<TITLE> Reading Data from a Stream</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">


<H1 CLASS="subsectionTitle">
<A HREF="index.htm">Using Streams</A>: 1.4 <A HREF="Stream_1.htm">Using Streams: The Basics</A>: 
Reading Data from a Stream</H1>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="Stream_1.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="Stream_4.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">1.3 Writing Data to a Stream</A> 
<!-- to next --> | <A HREF="Stream_6.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">1.5 Shutting Down a Stream</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
<PRE>StreamRead(), StreamReadByte()</PRE>
<P>
<A NAME="IX_StreamRead()">
 </A>
To read data in a stream, call the routine <CODE>
StreamRead()</CODE>
. This routine takes six arguments:</P>
<UL>
<LI>
The <CODE>
GeodeHandle</CODE>
 of the stream driver.</LI>
<LI>
<A NAME="IX_StreamToken:with StreamRead()">
 </A>
The <CODE>
StreamToken</CODE>
 of the stream.</LI>
<LI>
A member of the <CODE>
StreamBlocker</CODE>
 enumerated type, as described in <A HREF="Stream_3.htm#22136"> Blocking on Read or Write</A>
.</LI>
<LI>
The amount of data to be read, in bytes.</LI>
<LI>
A pointer to a data buffer; the data will be read from the stream into that buffer.</LI>
<LI>
A pointer to an integer. <CODE>
StreamRead()</CODE>
 will write the number of bytes actually read to that integer.</LI>
</UL>
<P>
<A NAME="IX_StreamError:with StreamRead()">
 </A>
If the requested amount of data was read successfully, <CODE>
StreamRead()</CODE>
 will return zero and write the number of bytes read (i.e. the size of the data buffer passed) to the integer pointed to by the sixth argument. If it could not successfully read the requested amount of data, it will return one of the following <CODE>
StreamError</CODE>
 values:</P>
<DL>
<DT>
STREAM_WOULD_BLOCK</DT><DD>
STREAM_BLOCK had been passed, and there was no data waiting in the stream. The sixth argument will be set to zero.</DD>
<DT>
STREAM_SHORT_READ_WRITE</DT><DD>
If STREAM_NOBLOCK had been passed, this means the stream did not have the amount of data requested. If STREAM_BLOCK had been passed, this means the stream was closed before the requested amount of data could be read. The sixth argument will contain the number of bytes actually read from the stream.</DD>
<DT>
STREAM_CLOSING</DT><DD>
The stream is in the process of being closed; no reading is permitted while this is happening. The sixth argument will be set to zero.</DD>
</DL>
<P>
<A NAME="IX_StreamReadByte()">
 </A>
You may often want to read a single byte from the stream. There is a special routine to do this, <CODE>
StreamReadByte()</CODE>
. This routine takes four arguments:</P>
<UL>
<LI>
The <CODE>
GeodeHandle</CODE>
 of the stream driver.</LI>
<LI>
The <CODE>
StreamToken</CODE>
 of the stream.</LI>
<LI>
A member of the <CODE>
StreamBlocker</CODE>
 enumerated type, as described in <A HREF="Stream_3.htm#22136"> Blocking on Read or Write</A>
.</LI>
<LI>
A pointer to a byte-sized variable; the data byte read will be written to this variable.</LI>
</UL>
<P>
<A NAME="IX_StreamError:with StreamReadByte()">
 </A>
If the byte is written successfully, <CODE>
StreamReadByte()</CODE>
 will return zero. Otherwise, it will return one of the following error values:</P>
<DL>
<DT>
STREAM_WOULD_BLOCK</DT><DD>
STREAM_BLOCK had been passed, and there was no data waiting in the stream.</DD>
<DT>
STREAM_CLOSING</DT><DD>
The stream is in the process of being closed; no reading is permitted while this is happening.</DD>
</DL>
<HR>
<!-- This blob is a bunch of standard links: up, back, index, etc. -->
<!-- up to top -->|&nbsp;<A HREF="../../index.htm"><IMG SRC="../../docImages/upTop.gif" ALT="Up: " BORDER="0">GEOS SDK TechDocs</A>
<!-- up to parent -->| <A HREF="Stream_1.htm"><IMG SRC="../../docImages/up.gif" ALT="Up" BORDER="0"></A>
<!-- down to first child --> 
<!-- to previous --> | <A HREF="Stream_4.htm"><IMG SRC="../../docImages/prev.gif" BORDER="0" ALT="Prev: ">1.3 Writing Data to a Stream</A> 
<!-- to next --> | <A HREF="Stream_6.htm"><IMG SRC="../../docImages/next.gif" BORDER="0" ALT="Next: ">1.5 Shutting Down a Stream</A> 
<HR>
<!-- That blob was a bunch of standard links: up, back, index, etc. -->
</BODY>
</HTML>
