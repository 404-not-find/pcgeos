COMMENT @%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

	Copyright (c) GeoWorks 1990 -- All Rights Reserved

PROJECT:	PC GEOS
MODULE:		Kernel Interface Definition -- Disk-internal functions
FILE:		diskInt.def

AUTHOR:		Adam de Boor, Aug 7, 1990

REVISION HISTORY:
	Name	Date		Description
	----	----		-----------
	Adam	8/7/90		Initial revision


DESCRIPTION:
	Definitions of functions that are "internal" to the kernel's Disk
	module. In other words, they are exported by the kernel but you'd
	better be damn sure what you're doing before trying to use them.
		
	$Id: diskInt.def,v 1.1 97/04/04 14:15:45 newdeal Exp $

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@

SetDef	__DISKINT

include	disk.def

StartKernel

global	DiskLock:appfar
global	DiskLockExcl:far
global 	DiskUnlock:appfar
global	DiskAllocAndInit:far

DiskFlags	record
    DF_STALE:1			; Set if the drive in which the disk was
				;  registered has been deleted.
    DF_NAMELESS:1		; Set if disk's volume name was generated by
				;  FSDGenNameless, not found on the disk.
    DF_WRITABLE:1		; Set if disk may be written.
    DF_ALWAYS_VALID:1		; Set if disk need not be validated.
DiskFlags	end

; 	Structure of a disk descriptor. Descriptors are stored in the FSInfo
; 	block in a linked list, sorted in most-recently-used order. (?)

DiskDesc	struct
    DD_next		nptr.DiskDesc	; Next-recently used disk descriptor.
    DD_id		dword		; Unique 32-bit ID for the disk.
    DD_drive		nptr.DriveStatusEntry
    DD_flags		DiskFlags	; Various status flags
    DD_media		MediaType	; Type of disk
if DBCS_PCGEOS
    DD_volumeLabel	wchar VOLUME_NAME_LENGTH dup(?)	; volume label
else
    DD_volumeLabel	char VOLUME_NAME_LENGTH dup(?)	; volume label
endif
							;  space-padded, not
							;  null-terminated
    DD_private		nptr		; Pointer to data private to the
					;  FSD. 0 if driver has stated it needs
					;  no private data.

DiskDesc	ends

EndKernel
